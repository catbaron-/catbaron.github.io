<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>海外用户的国内在线音乐服务使用指南 | Catbaron&#39;s Palace | 世间之善，唯工与妹</title>

  
  <meta name="author" content="Catbaron">
  

  
  <meta name="description" content="个人博客/IT/二次元">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="海外用户的国内在线音乐服务使用指南"/>

  <meta property="og:site_name" content="Catbaron&#39;s Palace"/>

  
  <meta property="og:image" content="/blog/favicon.ico"/>
  

  <link href="/blog/favicon.ico" rel="icon">
  <link rel="alternate" href="/blog/atom.xml" title="Catbaron&#39;s Palace" type="application/atom+xml">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/blog/">Catbaron&#39;s Palace</a>
    </h1>
    <p class="site-description">世间之善，唯工与妹</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/blog/">主页</a></li>
      
        <li><a href="/blog/archives">归档</a></li>
      
        <li><a href="/blog/categories">分类</a></li>
      
        <li><a href="/blog/tags">标签</a></li>
      
        <li><a href="/blog/aboutme">关于</a></li>
      
        <li><a href="https://weibo.com/catbaron">Weibo</a></li>
      
        <li><a href="https://twitter.com/catbaron0">Twitter</a></li>
      
        <li><a href="/blog/atom.xml">订阅</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>海外用户的国内在线音乐服务使用指南</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/2015/12/15/海外用户的国内在线音乐服务使用指南/" rel="bookmark">
        <time class="entry-date published" datetime="2015-12-15T06:28:37.000Z">
          2015-12-15
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="Outlier"><a href="#Outlier" class="headerlink" title="Outlier"></a>Outlier</h2><ul>
<li>背景</li>
<li>获得免费代理地址</li>
<li>在网易云音乐PC客户端中使用代理</li>
<li>在chrome中使用代理</li>
<li>在OSX中使用系统全局代理</li>
</ul>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>这篇指南其实说白了就是一个翻墙教程。众所周知，由于版权所限，海外用户是无法自由使用国内大部分的在线流媒体服务的，包括网易云音乐，QQ音乐，豆瓣FM，以及包括优酷土豆，B站，搜狐视频等一些涉及到正版视频的在线服务。这篇指南的起因是因为<a href="https://guyigenius.wordpress.com/2015/08/06/netease-cloudmusic-scripts-overseas/">这篇blog</a>。博主给了一些方法，主要是基于JS脚本，但是适用范围有限，而且评论里面也出现各种人反馈问题，我才发现原来对很多人来说这是个问题。不过，</p>
<h4 id="如果你只是想使用网易云音乐的话，强烈建议购买会员包。每月8元，真的不贵。而且更加安全，省事，且道德正确。"><a href="#如果你只是想使用网易云音乐的话，强烈建议购买会员包。每月8元，真的不贵。而且更加安全，省事，且道德正确。" class="headerlink" title="如果你只是想使用网易云音乐的话，强烈建议购买会员包。每月8元，真的不贵。而且更加安全，省事，且道德正确。"></a>如果你只是想使用网易云音乐的话，强烈建议购买会员包。每月8元，真的不贵。而且更加安全，省事，且道德正确。</h4><p>如果你不在意话费时间和精力，或者确实有其他需求，请继续阅读。</p>
<p>在线服务对海外用户的判断基本上都是基于IP，所以只要代理一下就没问题了。不过<strong><em>使用免费代理有很严重的安全隐患，请在知晓其安全威胁的前提下使用。</em></strong></p>
<h2 id="获得免费代理地址"><a href="#获得免费代理地址" class="headerlink" title="获得免费代理地址"></a>获得免费代理地址</h2><p>这里推荐使用<a href="http://proxy-list.org">prox-list.org</a>。</p>
<p><img src="https://i1.wp.com/ww1.sinaimg.cn/large/6f7d1cdfgw1eyeoavioojj20jl042t9j.jpg" alt="proxy-list.org"></p>
<p>通过搜索可以找到很多国内的代理服务器，也可以看到各服务器的速度，使用的协议等。这里推荐使用端口为80的http服务，适用性比较广。但是再次强调：<strong><em>你的请求信息明文可能会被代理服务器获得，所以一定谨慎使用。</em></strong></p>
<p>好我们拿到了一组（IP地址：端口）。下面我们看怎么使用。</p>
<h2 id="在网易云音乐PC客户端中使用代理"><a href="#在网易云音乐PC客户端中使用代理" class="headerlink" title="在网易云音乐PC客户端中使用代理"></a>在网易云音乐PC客户端中使用代理</h2><p>最简单的是在网易云音乐客户端中使用了。之前Mac平台的客户端也可以直接使用，但最新版本中此功能消失，所以目前只限于PC平台。</p>
<ol>
<li>点击客户端界面右上角齿轮进入设置界面</li>
<li>找到“工具”-&gt;“代理设置”。</li>
<li>选择“自定义代理”</li>
<li>服务器和端口填入刚找到的IP和端口（port）</li>
<li>由于我们使用的是免费代理，所以没有用户名密码。如果你通过其他途径拿到了自建代理服务器，根据使用的代理协议不同，也许会需要用户名密码。这里我们略过留空。</li>
<li>测试一下。如果提示代理可用，点击“确定”，重启客户端生效。</li>
</ol>
<p>这里的测试比较有用，可以快速得知自己选中的代理是否可用。</p>
<h2 id="在chrome中使用代理"><a href="#在chrome中使用代理" class="headerlink" title="在chrome中使用代理"></a>在chrome中使用代理</h2><p>推荐使用SwitchySharp插件。SwitchySharp的作者最近开发了一个新的代理控制插件，作者认为新作品更优秀，更可控，但是我个人认为SwitchySharp更简单易懂。</p>
<p>在插件的选项界面新建一个情景模式。这里我的模式叫“in”</p>
<p><img src="https://i2.wp.com/ww3.sinaimg.cn/large/6f7d1cdfgw1eyeopoqeyoj20lo0cvgnc.jpg" alt="情景模式"></p>
<p>可以看到这里有两个“手动”和“自动”配置方法。手动配置的意思是，你要自己设置代理地址，并且自己设置代理规则，哪些请求使用代理，哪些不使用代理。自动配置则是读取一个配置文件，不同的请求自动使用不同的代理。</p>
<h3 id="手动配置"><a href="#手动配置" class="headerlink" title="手动配置"></a>手动配置</h3><ol>
<li>和网易云音乐的使用方法一样，我们这里填入刚才找到的IP和端口。并且选中“对所有协议均使用相同的代理服务器”。</li>
<li>保存</li>
<li>在“切换规则”中配置相关规则。以虾米为例</li>
</ol>
<table><br><thead><br><tr><br><th>模式名称</th><br><th>URL模式</th><br><th>匹配模式</th><br><th>情景模式</th><br></tr><br></thead><br><tbody><br><tr><br><td>随便</td><br><td><em>://</em>.xiami.com/*</td><br><td>通配符</td><br><td>in</td><br></tr><br></tbody><br></table>

<p>这里比较重要的是URL模式，你需要了解基本的通配符，以及要使用代理的URL写法。比较容易有问题的是网易云音乐的URL模式。虽然网易云音乐的 主页是music.163.com，但是对数据的请求都是xxx.126.net而不是xxx.163.com。所以正确的写法应该<code>\*://\*.126.net/\*</code></p>
<ol>
<li>保存</li>
<li>单击SwitchySharp插件图标，选择“自动切换模式”。</li>
</ol>
<p>这里如果你选择“in”，那么所以的请求都会使用代理，因此你就无法使用油管了。使用“自动切换模式”会根据你的切换规则决定是否使用代理，以及使用什么情景模式。</p>
<h3 id="自动模式"><a href="#自动模式" class="headerlink" title="自动模式"></a>自动模式</h3><p>这里我直接贴一下我写好的代理配置文件。<code> </code></p>
<pre><code>function regExpMatch(url, pattern) {    try { return new RegExp(pattern).test(url); } catch(ex) { return false; }    }
    function FindProxyForURL(url, host) {
    if (shExpMatch(url, &quot;*://*.xiami.com/*&quot;) || shExpMatch(url, &quot;*://xiami.com/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    if (shExpMatch(url, &quot;*://*.163.com/*&quot;) || shExpMatch(url, &quot;*://163.com/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    if (shExpMatch(url, &quot;*://*.youku.com/*&quot;) || shExpMatch(url, &quot;*://youku.com/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    if (shExpMatch(url, &quot;*://*.tudou.com/*&quot;) || shExpMatch(url, &quot;*://tudou.com/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    if (shExpMatch(url, &quot;*://*.bilibili.com/*&quot;) || shExpMatch(url, &quot;*://bilibili.com/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    if (shExpMatch(url, &quot;*://*.126.net/*&quot;) || shExpMatch(url, &quot;*://126.net/*&quot;)) return &apos;PROXY 27.46.22.113:8888&apos;;
    return &apos;DIRECT&apos;;
}
</code></pre><p>&nbsp;</p>
<p>这里面包括了对虾米音乐，网易云音乐，优酷土豆，和bilibili的代理配置。你也可以通过SwitchySharp插件的“导入/导出”功能，根据你的“切换规则”配置导出PAC文件。</p>
<ol>
<li>复制这段代码，把里面的IP和地址替换为你自己的代理服务器，然后保存为proxy.pac。</li>
<li>在“情景模式”中选择“自动配置”</li>
<li>“导入PAC文件”，导入proxy.pac</li>
</ol>
<p>如果你有自己的服务器，或者自己电脑搭建了本地web服务器，也可以吧PAC文件上传到服务器上，这里直接填入pac文件的访问地址即可。这里不赘述了。</p>
<ol>
<li>单击插件图标，选择“in”。<br>如之前所说，这里选择了“in”，是说所有的请求都会使用“in”的代理配置，也就是会使用PAC文件的配置。</li>
</ol>
<p><em>注意：如果你使用了自动代理，就不要使用“自动切换模式”</em>。</p>
<p>如此这般，你就可以使用chrome使用这些在线流媒体服务了。</p>
<h2 id="在OSX中使用系统全局代理"><a href="#在OSX中使用系统全局代理" class="headerlink" title="在OSX中使用系统全局代理"></a>在OSX中使用系统全局代理</h2><p>这里我们需要使用到刚才的PAC文件。</p>
<ol>
<li>打开网络偏好设置</li>
<li>高级</li>
<li>代理</li>
<li>这里选中自动代理配置，填入pac文件的访问地址。</li>
</ol>
<p>这里需要说明的是，如果你要使用类似chrome的自动代理配置，你需要一个pac文件的访问地址。可以开启Mac的apache迅速搭建本地 web服务来做到，但是不在本文的说明范围，请自行谷歌。如果你没有开启，则跳过此步骤，但这意味着你所有的请求，包括任意联网的客户端的网络请求，都会 经过代理。</p>
<p><strong><em>这会有严重的安全隐患，所以十分不建议如此使用。</em></strong><br>5. 选中web代理（http）和安全web代理（https），并在中都填入刚才的代理服务器地址和端口。</p>
<p>这里比较令我费解的是，虽然我们使用了pac配置文件，但是系统似乎并不会使用其中的代理地址，必须在下面http和https中再配置一遍好服务器地址才能正常使用。也许是我的个例。</p>
<p>这样一来，Mac平台的虾米和网易云音乐客户端也可以正常使用了。</p>
<p>最后再啰嗦几句。</p>
<ul>
<li>请一定在知晓免费代理的安全隐患的前提下使用次方案。</li>
<li>免费代理的地址会经常抽风/失效，如果发现代理不通畅，比如通过PC端的网易云客户端测试代理地址不再可用，可以去proxy-list找找别的地址。</li>
<li>SwitchyPac的使用方法如果不太清楚，去Google，网上大把大把的中文教程。</li>
</ul>
<p>以上。</p>
<p>========更新======</p>
<p>写了个<a href="http://catbaron.com/blog/2015/12/19/%e8%87%aa%e5%8a%a8%e8%8e%b7%e5%8f%96%e5%9b%bd%e5%86%85%e4%bb%a3%e7%90%86ip/">自动获取IP更新PAC文件的脚本</a>。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/blog/categories/技/">技</a>
    </span>
    

    

    </div>

    
  </div>
</article>

  
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'catbaron';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>





    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 Catbaron
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'a27906bc44bd558c', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
</body>
</html>